import { createI18n } from 'vue-i18n'
import { LocalEntity, localData } from './utils/localData'

export const supportedLocales = ['en', 'nl', 'fr', 'de', 'ru'] as const
export type SupportedLocale = (typeof supportedLocales)[number]

function normalizeLocale(raw: string | null | undefined): SupportedLocale | null {
  const s = (raw ?? '').trim().toLowerCase()
  if (!s) return null

  // Accept exact match
  if ((supportedLocales as readonly string[]).includes(s)) return s as SupportedLocale

  // Accept prefixes like "de-DE" / "ru_RU"
  const base = s.split(/[-_]/)[0] ?? ''
  if ((supportedLocales as readonly string[]).includes(base)) return base as SupportedLocale

  return null
}

function detectInitialLocale(): SupportedLocale {
  const saved = normalizeLocale(localData.getString(LocalEntity.Locale))
  if (saved) return saved

  const nav =
    normalizeLocale(navigator.language) ??
    normalizeLocale(Array.isArray(navigator.languages) ? navigator.languages[0] : null) ??
    null

  return nav ?? 'en'
}

const baseMessages = {
  en: {
    common: {
      about: 'About',
      manageKeys: 'Manage keys',
      shareLink: 'Share link',
      scanQr: 'Scan QR',
      back: 'Back',
      chat: 'Chat',
      close: 'Close',
      cancel: 'Cancel',
      proceed: 'Proceed',
      reply: 'Reply',
      send: 'Send',
      settings: 'Settings',
      users: 'Users',
      online: 'Online',
      busy: 'busy',
      language: 'Language',
      unreadMessages: 'Unread messages',
      logout: 'Logout',
      edit: 'Edit',
      delete: 'Delete',
      save: 'Save',
      modified: 'modified',
      copy: 'Copy',
      reload: 'Reload',
    },
    toast: {
      chatSendFailedTitle: 'Message not sent',
      chatSendFailedBody: "Couldn't reach the server. Please check your connection and try again.",
      chatTooLargeTitle: 'Message not sent',
      chatTooLargeBody: 'Message is too large to send.',
      introvertTitle: 'Cannot add user',
      introvertBody:
        'This is in introvert mode and he can not be added. If it your friend ask him to create a chat, or disaple introvert mode',
      notificationsEnabledTitle: 'Notifications enabled',
      notificationsEnabledBody: 'Push notifications are now active for this device.',
      notificationsFailedTitle: 'Notifications not active',
      notificationsFailedBody: 'Permission was granted, but push setup failed. Try reloading the app.',
      notificationsBlockedTitle: 'Notifications blocked',
      notificationsBlockedBody: 'Enable notifications in your browser/app settings to receive push notifications.',
      copiedTitle: 'Copied',
      copiedBody: 'Message copied to clipboard.',
      copyFailedTitle: 'Copy failed',
      copyFailedBody: 'Could not copy message to clipboard.',
    },
    setup: {
      subtitle: 'Anonymous, encrypted voice web messenger with no registration and no chat history.',
      yourName: 'Your name',
      namePlaceholder: 'e.g. Alex',
      join: 'Join',
    },
    shareLink: {
      hint: 'Share this link to let someone create a private chat with you after they sign in.',
      linkLabel: 'Link',
    },

    scanQr: {
      hint: 'Scan an invite QR code to add the user immediately.',
      cameraUnavailable: 'No camera available on this device.',
      cameraPermissionDenied: 'Camera permission denied. Please allow camera access and try again.',
      cameraStartFailed: 'Could not start the camera.',
      invalidInvite: 'This QR code is not a valid invite link for this site.',
      addFailedTitle: 'Cannot add user',
    },
    signed: {
      keys: {
        title: 'Manage keys',
        description:
          "What you need to know:\n1. To sign in, you need a key in your browser and the password.\n2. Knowing the username and password without the key will not let you sign in.\n3. Having the key without the password will not let you sign in.\n4. Deleting the key permanently and irreversibly loses access.\n5. Each account has its own key, created locally on the device during registration.\n6. Clearing browser data or uninstalling the browser may remove keys from the device.",
        countOnDevice: 'Keys found: {count}',
        download: 'Download',
        downloadUser: 'Download {username} key',
        downloadAll: 'Download all keys',
        notificationsEnabledTitle: 'Meldingen ingeschakeld',
        notificationsEnabledBody: 'Pushmeldingen zijn nu actief voor dit apparaat.',
        notificationsFailedTitle: 'Meldingen niet actief',
        notificationsFailedBody: 'Toestemming is gegeven, maar push-instelling is mislukt. Probeer de app te herladen.',
        notificationsBlockedTitle: 'Meldingen geblokkeerd',
        notificationsBlockedBody: 'Schakel meldingen in via je browser-/app-instellingen om pushmeldingen te ontvangen.',
        downloadSpecific: 'Download a specific key',
        changePassword: 'Change password',
        addFromFile: 'Add key(s) from file',
        remove: 'Remove',
        removeAll: 'Remove all local keys',
        removeSpecific: 'Remove a specific key',
        downloadAllOk: 'Downloaded {count} key(s).',
        downloadOneOk: 'Downloaded key.',
        importBadFormat: 'Invalid file format. Expected a JSON key entry or array of key entries.',
        importResult: 'Read: {read}. Added: {added}. Ignored (already exists): {ignored}. Invalid: {invalid}.',
        importConfirmHint: 'Review the import summary and confirm to add keys to this device.',
        importConfirmProceed: 'Add keys',
        specificHint: 'Enter username and password to locate a matching encrypted entry. This does not log you in.',
        specificMissing: 'Username and password required.',
        specificNotFound: 'No matching key found (username/password mismatch).',
        changePasswordHint: 'Enter username and current password to locate a key. This does not log you in.',
        changePasswordWarning:
          'This operation will encrypt local key with the new password. Note, that this will not take effect on the same key on any of your other devices or backed up keys. They all will still require the old password and be fully valid with it for login.',
        newPassword: 'New password',
        repeatNewPassword: 'Repeat new password',
        changePasswordConfirm: 'Change password',
        changePasswordOk: 'Password updated for local key.',
        changePasswordMismatch: 'Passwords do not match.',
        changePasswordNewMissing: 'New password required.',
        removeConfirm:
          'This will permanently and irrecoverably delete ALL local keys for {count} account(s) created/imported on this device.\n\nYou will be logged out.',
        removeAllConfirm: 'Remove all keys',
        removeAllOk: 'All local keys removed.',
        removeSpecificHint: 'Enter username and password to locate a key to remove. This does not log you in.',
        removeSpecificConfirmHint:
          'Key found for {username}. Removing it will permanently delete local access for this account on this device.\n\nThis cannot be undone.',
        removeSpecificConfirm: 'Remove key',
        removeOneOk: 'Key removed.',
      },
      subtitle: 'Your own private messenger. Fully encrypted, no logs, no traces.',
      username: 'Username',
      usernamePlaceholder: 'e.g. alice',
      password: 'Password',
      passwordPlaceholder: 'At least 8 characters',
      expirationDays: 'Account expiration (days)',
      expirationDaysSettingsHelp: 'Change after how many days of inactivity your account expires (stored encrypted).',
      expirationDaysRangeInfo: 'Accepted range: 7–365 days.',
      expirationDaysRangeError: 'Please enter a number between 7 and 365.',
      expirationDaysUnlockHint: 'Unlock your keys to change this setting.',
      register: 'Register',
      login: 'Login',
      recreate: {
        title: 'Account not found',
        body: 'You have a valid local key for "{username}", but this username is not registered on the server. Do you want to create a new account with this username and key?',
        proceed: 'Continue',
        expirationHint: 'Choose account expiration (days).',
        create: 'Create account',
        cancel: 'Cancel',
      },
      stayLoggedIn: 'Stay logged in',
      stayLoggedInHelp:
        "Unsafe option!\nDo not enable on someone else's or shared devices.\n\nA copy of browser data from a device where you're signed in gives full control over your account with no way to limit it.\n\nKeeps your session without an expiration.\n\nUseful if you added this site to your mobile home screen and use it like an app.",
      autoUnlockOnDevice: 'Auto-unlock on this device',
      add: 'Add',
      switchAnonymous: 'Anonymous mode',
      unlockSubtitle: 'Unlock your private key to read and send messages.',
      unlockFor: 'Unlock for',
      unlock: 'Unlock',
      unlockFailed: 'Unlock failed.',
      chats: 'Chats',
      chat: 'Chat',
      addFriend: 'Add friend (username)',
      friendPlaceholder: 'Username',
      createChat: 'Create chat',
      filterShow: 'Show: {type}',
      filterAll: 'All',
      filterPrivate: 'Private',
      filterGroups: 'Groups',
      groupName: 'Group name',
      groupNamePlaceholder: 'e.g. Team',
      createGroup: 'Create group',
      addMember: 'Add member',
      memberPlaceholder: 'Username',
      memberAddedOk: 'Member added.',
      memberAlreadyInGroup: 'This user is already in this group.',
      membersList: 'Members list',
      membersLoading: 'Loading members…',
      noMembers: 'No members.',
      renameGroup: 'Rename group',
      renameGroupPlaceholder: 'New group name',
      renameGroupBadLength: 'Name must be 3–64 characters.',
      deleteChatWarning:
        'This will permanently delete this chat and remove all messages for both you and your friend. This cannot be undone.',
      leaveGroupRemoveMyMessagesWarning:
        'You will leave this group and all of your messages in it will be permanently deleted. This cannot be undone.',
      deleteGroup: 'Delete group',
      deleteGroupWarning:
        'You are the last member. This will permanently delete the group and remove all messages. This cannot be undone.',
      noChats: 'No chats yet. Add a friend by username.',
      youSignedInAs: 'Signed in as',
      hiddenMode: 'Hidden mode',
      hiddenModeHelp: 'When enabled, others will not see your online/busy status.',
      introvertMode: 'Introvert mode',
      introvertModeHelp:
        'When enabled, others cannot create new chats with you or add you to groups. Calls are only allowed for users who already share a private chat with you.',
      cannotChatWithSelf: 'You cannot create a private chat with yourself.',
      deleteAccount: 'Delete account',
      deleteAccountWarning:
        'This action is unrecoverable. Your account will be deleted and all of your messages in all chats will be permanently removed. This cannot be undone.',
      logoutOtherDevices: 'Logout other devices',
      logoutAndRemoveKeyOtherDevices: 'Logout and remove key on other devices',
      reloadAppNoCache: 'Reload app (no cache)',
      deleteChat: 'Delete chat',
      leaveGroup: 'Leave group',
      errInvalidCredentials: 'Invalid username or password.',
      errUsernameExists: 'Username already exists.',
      errUsernameUnsafe: 'Username contains unsafe characters.',
      errUnauthorized: 'Session expired. Please log in again.',
      errNoLocalKey: 'No local key found for this user on this device. Use the correct password, or register again to create new keys.',
      errPasswordTooLong: 'Password must be at most {max} characters.',
      help: {
        usernameAria: 'Help: username',
        passwordAria: 'Help: password',
        expirationDaysAria: 'Help: account expiration',
        stayLoggedInAria: 'Help: stay logged in',
        username:
          'Limitations: 3–64 characters.\nSecurity note: (fill later)\nTip: usernames are case-sensitive on login.',
        password:
          'Limitations: at least 8 characters.\nSecurity note: (fill later)\nTip: your password is used to decrypt your private key locally.',
        expirationDays:
          'Limitations: 7–365 days.\nSecurity note: (fill later)\nTip: activity extends expiration (with privacy jitter).',
      },
      entropy: {
        title: 'Entropy',
        instructions: 'Click 10 times on random places inside the field below.',
        hits: 'Hits: {hits}/{total}',
      },
      genericError: 'Something went wrong.',
      connectionLost: {
        title: 'Connection lost',
        body: 'Realtime connection failed after multiple attempts. You can reload the app or log out.',
        remove: 'Verwijderen',
      },
        removeSpecific: 'Een specifieke sleutel verwijderen',
      settingsToast: {
        savedTitle: 'Saved',
        failedTitle: 'Update failed',
        otherDevicesLoggedOut: 'Other devices logged out.',
        otherDevicesLoggedOutWiped: 'Other devices logged out and key removed.',
        hiddenModeOn: 'Hidden mode enabled.',
        hiddenModeOff: 'Hidden mode disabled.',
        introvertModeOn: 'Introvert mode enabled.',
        introvertModeOff: 'Introvert mode disabled.',
        expirationDaysSaved: 'Account expiration updated to {days} days.',
        serverError: 'Server error. Please try again.',
        notLoggedIn: 'Not logged in.',
        vaultTooLarge: 'Data too large to save.',
        removeSpecificHint: 'Voer gebruikersnaam en wachtwoord in om de te verwijderen sleutel te vinden. Dit logt je niet in.',
        removeSpecificConfirmHint:
          'Sleutel gevonden voor {username}. Verwijderen wist de lokale toegang voor dit account op dit apparaat.\n\nDit kan niet ongedaan worden gemaakt.',
        removeSpecificConfirm: 'Sleutel verwijderen',
        removeOneOk: 'Sleutel verwijderd.',
      },
    },
    about: {
      title: 'About',
      description:
        'TODO',
      repoLink: 'Git repository',
    },
    theme: {
      label: 'Theme: {mode}',
      notificationsEnabledTitle: 'Notifications activées',
      notificationsEnabledBody: 'Les notifications push sont maintenant actives sur cet appareil.',
      notificationsFailedTitle: 'Notifications inactives',
      notificationsFailedBody: "L’autorisation a été accordée, mais la configuration push a échoué. Essayez de recharger l’application.",
      notificationsBlockedTitle: 'Notifications bloquées',
      notificationsBlockedBody: "Activez les notifications dans les réglages de votre navigateur/app pour recevoir des notifications push.",
      system: 'System',
        remove: 'Supprimer',
      dark: 'Dark',
        removeSpecific: 'Supprimer une clé spécifique',
      light: 'Light',
      toggleAria: 'Toggle theme',
    },
    settings: {
      title: 'Settings',
      youLabel: 'You:',
    },
    notifications: {
      settingsLabel: 'Notifications:',
      settingsHint: 'Enable notifications to get call/message alerts when the app is in background.',
      promptTitle: 'Enable notifications?',
        removeSpecificHint:
          'Saisissez le nom d’utilisateur et le mot de passe pour trouver la clé à supprimer. Cela ne vous connecte pas.',
        removeSpecificConfirmHint:
          'Clé trouvée pour {username}. La suppression effacera l’accès local pour ce compte sur cet appareil.\n\nCette action est irréversible.',
        removeSpecificConfirm: 'Supprimer la clé',
        removeOneOk: 'Clé supprimée.',
      promptBody: 'Enable notifications to receive call and message alerts on your phone.',
      deniedBody: 'Notifications are blocked in your browser settings for this site.',
      enabledBody: 'Notifications are enabled.',
      unsupportedBody: 'Notifications are not supported in this browser.',
      enable: 'Enable notifications',
      notNow: 'Not now',
      state: {
        default: 'Not enabled',
        granted: 'Enabled',
        denied: 'Blocked',
      },
    },
    sidebar: {
      groupChat: 'Public chat',
      noOneOnline: 'No one online right now.',
    },
    chat: {
      typeMessage: 'Type a message...',
      replying: 'Replying',
      replyingTo: 'Replying to {name}',
        remove: 'Entfernen',
      replyTo: 'Reply to {name}',
        removeSpecific: 'Einen bestimmten Schlüssel entfernen',
      joinOngoingTitle: 'Join ongoing call?',
      joinOngoingBodyNamed: "You are attempting to join {name}'s ongoing call.",
      joinOngoingBody: 'You are attempting to join an ongoing call.',
      callAria: 'Call',
      sendAria: 'Send',
    },
    call: {
      notInCall: 'Not in call',
      inCall: 'In call: {names}',
      incomingFromLabel: 'Incoming call from',
      incomingFrom: 'Incoming call from {name}',
        removeSpecificHint:
          'Gib Benutzername und Passwort ein, um den zu entfernenden Schlüssel zu finden. Das meldet dich nicht an.',
        removeSpecificConfirmHint:
          'Schlüssel für {username} gefunden. Das Entfernen löscht den lokalen Zugriff für dieses Konto auf diesem Gerät.\n\nDies kann nicht rückgängig gemacht werden.',
        removeSpecificConfirm: 'Schlüssel entfernen',
        removeOneOk: 'Schlüssel entfernt.',
      unknown: 'Unknown',
      waitingToJoinNamed: 'Waiting to join {name}…',
      waitingToJoin: 'Waiting to join…',
      requestingToJoinNamed: 'Requesting to join {name}…',
      requestingToJoin: 'Requesting to join…',
      calling: 'Calling…',
      callingNamed: 'Calling {name}…',
      ringing: 'Ringing…',
      ringingNamed: 'Ringing {name}…',
      inviting: 'Inviting…',
      connecting: 'Connecting…',
      connected: 'Connected',
      incomingCall: 'Incoming call',
      incomingCallNamed: 'Incoming call: {name}',
      callEnded: 'Call ended.',
      callRejected: 'Call rejected.',
      callFailed: 'Call failed: {reason}',
      introvertBlocked: 'Call blocked: user is in introvert mode.',
      joinFailed: 'Join failed.',
      joinFailedReason: 'Join failed: {reason}',
      from: 'From {name}',
      accept: 'Accept',
      reject: 'Reject',
      cancelRequest: 'Cancel request',
      addToCall: 'Add to call',
      hangUp: 'Hang up',
      joinRequestNamed: '{name} wants to join this call.',
      joinRequestSomeone: 'Someone wants to join this call.',
      micPermissionDenied: 'Microphone permission denied.',
      micNotFound: 'No microphone found.',
      micInUse: 'Microphone is in use.',
      micError: 'Microphone error.',
    },
    session: {
      enterName: 'Enter a name.',
      connecting: 'Connecting…',
      nameTaken: 'Name is taken.',
      invalidName: 'Invalid name.',
      disconnected: 'Disconnected.',
      connectionError: 'Connection error.',
      turn: 'TURN {host}',
      udpRelayPortsRatio: 'UDP relay ports ~{used}/{total}',
        remove: 'Удалить',
      udpRelayPortsTotal: 'UDP relay ports {total}',
        removeSpecific: 'Удалить конкретный ключ',
      udpRelayPortsUsed: 'UDP relay ports in use ~{used}',
      estConfMax: 'est conf max ~{users} users',
      estCallsMax: 'est 1:1 max ~{calls} calls',
    },
    confirm: {
      leave: 'Logout and leave {appName}?',
      deleteAccount: 'Delete your account and all server-side history for {appName}? This cannot be undone.',
      logoutAndRemoveKeyOtherDevices: 'Log out on other devices and remove the key there? This will delete local access on those devices and cannot be undone.',
      deleteMessage: 'Delete this message?',
      deleteChat: 'Delete this chat for both users?',
      leaveGroup: 'Leave this group?',
    },
        removeSpecificHint: 'Введите имя пользователя и пароль, чтобы найти ключ для удаления. Это не выполнит вход.',
        removeSpecificConfirmHint:
          'Ключ для {username} найден. Удаление навсегда удалит локальный доступ к этому аккаунту на этом устройстве.\n\nЭто нельзя отменить.',
        removeSpecificConfirm: 'Удалить ключ',
        removeOneOk: 'Ключ удалён.',
    lang: {
      en: 'English',
      nl: 'Nederlands',
      fr: 'Français',
      de: 'Deutsch',
      ru: 'Русский',
    },
  },

  nl: {
    common: {
      about: 'Over',
      manageKeys: 'Sleutels beheren',
      shareLink: 'Link delen',
      scanQr: 'QR scannen',
      back: 'Terug',
      chat: 'Chat',
      close: 'Sluiten',
      cancel: 'Annuleren',
      proceed: 'Doorgaan',
      reply: 'Antwoorden',
      send: 'Versturen',
      settings: 'Instellingen',
      users: 'Gebruikers',
      online: 'Online',
      busy: 'bezet',
      language: 'Taal',
      unreadMessages: 'Ongelezen berichten',
      logout: 'Uitloggen',
      edit: 'Bewerken',
      delete: 'Verwijderen',
      save: 'Opslaan',
      modified: 'bewerkt',
      reload: 'Herladen',
    },
    toast: {
      chatSendFailedTitle: 'Bericht niet verzonden',
      chatSendFailedBody: 'Kon de server niet bereiken. Controleer je verbinding en probeer het opnieuw.',
      notificationsEnabledTitle: 'Meldingen ingeschakeld',
      notificationsEnabledBody: 'Pushmeldingen zijn nu actief voor dit apparaat.',
      notificationsFailedTitle: 'Meldingen niet actief',
      notificationsFailedBody: 'Toestemming is gegeven, maar push-instelling is mislukt. Probeer de app opnieuw te laden.',
      notificationsBlockedTitle: 'Meldingen geblokkeerd',
      notificationsBlockedBody: 'Schakel meldingen in in je browser-/app-instellingen om pushmeldingen te ontvangen.',
    },
    setup: {
      subtitle: 'Anonieme, versleutelde spraak-webmessenger zonder registratie en zonder chatgeschiedenis.',
      yourName: 'Jouw naam',
      namePlaceholder: 'bijv. Alex',
      join: 'Meedoen',
    },
    shareLink: {
      hint: 'Deel deze link zodat iemand na het inloggen een privéchat met je kan maken.',
      linkLabel: 'Link',
    },

    scanQr: {
      hint: 'Scan een uitnodigings-QR om de gebruiker direct toe te voegen.',
      cameraUnavailable: 'Geen camera beschikbaar op dit apparaat.',
      cameraPermissionDenied: 'Cameratoegang geweigerd. Sta toegang toe en probeer opnieuw.',
      cameraStartFailed: 'Kon de camera niet starten.',
      invalidInvite: 'Deze QR-code is geen geldige uitnodigingslink voor deze site.',
      addFailedTitle: 'Kan gebruiker niet toevoegen',
    },

    signed: {
      keys: {
        title: 'Sleutels beheren',
        description:
          'Wat je moet weten:\n1. Om in te loggen heb je een sleutel in de browser en het wachtwoord nodig.\n2. Alleen gebruikersnaam en wachtwoord zonder sleutel is niet genoeg om in te loggen.\n3. Een sleutel zonder wachtwoord is niet genoeg om in te loggen.\n4. Het verwijderen van de sleutel betekent permanent en onomkeerbaar verlies van toegang.\n5. Elk account heeft zijn eigen sleutel, die lokaal op het apparaat wordt gemaakt bij registratie.\n6. Het volledig wissen van browsergegevens of het verwijderen van de browser kan sleutels van het apparaat verwijderen.',
        countOnDevice: 'Sleutels gevonden: {count}',
        download: 'Downloaden',
        downloadUser: 'Sleutel van {username} downloaden',
        downloadAll: 'Alle sleutels downloaden',
        downloadSpecific: 'Een specifieke sleutel downloaden',
        changePassword: 'Wachtwoord wijzigen',
        addFromFile: 'Sleutel(s) uit bestand toevoegen',
        remove: 'Verwijderen',
        removeAll: 'Alle lokale sleutels verwijderen',
        removeSpecific: 'Een specifieke sleutel verwijderen',
        downloadAllOk: '{count} sleutel(s) gedownload.',
        downloadOneOk: 'Sleutel gedownload.',
        importBadFormat: 'Ongeldig bestandsformaat. Verwacht een JSON-sleutelinvoer of een array met sleutelinvoeren.',
        importResult: 'Gelezen: {read}. Toegevoegd: {added}. Genegeerd (bestaat al): {ignored}. Ongeldig: {invalid}.',
        importConfirmHint: 'Controleer de samenvatting en bevestig om sleutels aan dit apparaat toe te voegen.',
        importConfirmProceed: 'Sleutels toevoegen',
        specificHint:
          'Voer gebruikersnaam en wachtwoord in om een overeenkomstige versleutelde invoer te vinden. Dit logt je niet in.',
        specificMissing: 'Gebruikersnaam en wachtwoord zijn verplicht.',
        specificNotFound: 'Geen overeenkomende sleutel gevonden (gebruikersnaam/wachtwoord komt niet overeen).',
        changePasswordHint: 'Voer gebruikersnaam en huidig wachtwoord in om een sleutel te vinden. Dit logt je niet in.',
        changePasswordWarning:
          'Deze bewerking versleutelt de lokale sleutel met het nieuwe wachtwoord. Let op: dit heeft geen effect op dezelfde sleutel op je andere apparaten of op back-ups. Daar blijft het oude wachtwoord gelden en de sleutel blijft volledig geldig voor inloggen.',
        newPassword: 'Nieuw wachtwoord',
        repeatNewPassword: 'Herhaal nieuw wachtwoord',
        changePasswordConfirm: 'Wachtwoord wijzigen',
        changePasswordOk: 'Wachtwoord bijgewerkt voor lokale sleutel.',
        changePasswordMismatch: 'Wachtwoorden komen niet overeen.',
        changePasswordNewMissing: 'Nieuw wachtwoord is verplicht.',
        removeConfirm:
          'Dit verwijdert permanent en onherstelbaar ALLE lokale sleutels voor {count} account(s) die op dit apparaat zijn aangemaakt/geïmporteerd.\n\nJe wordt uitgelogd.',
        removeAllConfirm: 'Alle sleutels verwijderen',
        removeAllOk: 'Alle lokale sleutels verwijderd.',
        removeSpecificHint: 'Voer gebruikersnaam en wachtwoord in om een sleutel te vinden om te verwijderen. Dit logt je niet in.',
        removeSpecificConfirmHint:
          'Sleutel gevonden voor {username}. Verwijderen wist de lokale toegang voor dit account op dit apparaat.\n\nDit kan niet ongedaan worden gemaakt.',
        removeSpecificConfirm: 'Sleutel verwijderen',
        removeOneOk: 'Sleutel verwijderd.',
      },
      subtitle: 'Je eigen privé-messenger. Volledig versleuteld, geen logs, geen sporen.',
      username: 'Gebruikersnaam',
      usernamePlaceholder: 'bijv. alice',
      password: 'Wachtwoord',
      passwordPlaceholder: 'Minstens 8 tekens',
      expirationDays: 'Accountverval (dagen)',
      expirationDaysSettingsHelp: 'Wijzig na hoeveel dagen inactiviteit je account verloopt (versleuteld opgeslagen).',
      expirationDaysRangeInfo: 'Toegestane bereik: 7–365 dagen.',
      expirationDaysRangeError: 'Voer een getal in tussen 7 en 365.',
      expirationDaysUnlockHint: 'Ontgrendel je sleutels om deze instelling te wijzigen.',
      register: 'Registreren',
      login: 'Inloggen',
      recreate: {
        title: 'Account niet gevonden',
        body: 'Je hebt een geldige lokale sleutel voor "{username}", maar deze gebruikersnaam is niet geregistreerd op de server. Wil je een nieuw account aanmaken met deze gebruikersnaam en sleutel?',
        proceed: 'Doorgaan',
        expirationHint: 'Kies accountverval (dagen).',
        create: 'Account aanmaken',
        cancel: 'Annuleren',
      },
      stayLoggedIn: 'Ingelogd blijven',
      stayLoggedInHelp:
        'Onveilige optie!\nSchakel dit niet in op gedeelde of niet-eigen apparaten.\n\nEen kopie van de browsergegevens van een apparaat waarop je bent ingelogd geeft volledige controle over je account, zonder mogelijkheid om dit te beperken.\n\nBewaart de sessie zonder vervaldatum.\n\nHandig als je deze site aan het startscherm van je mobiele apparaat hebt toegevoegd en hem als app gebruikt.',
      autoUnlockOnDevice: 'Automatisch ontgrendelen op dit apparaat',
      youSignedInAs: 'Aangemeld als',
      hiddenMode: 'Verborgen modus',
      hiddenModeHelp: 'Wanneer ingeschakeld, zien anderen je online-/bezetstatus niet.',
      introvertMode: 'Introverte modus',
      introvertModeHelp:
        'Wanneer ingeschakeld, kunnen anderen geen nieuwe chats met je maken of je aan groepen toevoegen. Oproepen zijn alleen toegestaan voor gebruikers die al een privéchat met je delen.',
      errInvalidCredentials: 'Ongeldige gebruikersnaam of wachtwoord.',
      errUsernameExists: 'Gebruikersnaam bestaat al.',
      errUsernameUnsafe: 'Gebruikersnaam bevat onveilige tekens.',
      errUnauthorized: 'Sessie verlopen. Log opnieuw in.',
      errNoLocalKey:
        'Geen lokale sleutel gevonden voor deze gebruiker op dit apparaat. Gebruik het juiste wachtwoord, of registreer opnieuw om nieuwe sleutels te maken.',
      errPasswordTooLong: 'Wachtwoord mag maximaal {max} tekens zijn.',
      help: {
        usernameAria: 'Hulp: gebruikersnaam',
        passwordAria: 'Hulp: wachtwoord',
        expirationDaysAria: 'Hulp: accountverval',
        stayLoggedInAria: 'Hulp: ingelogd blijven',
        username:
          'Beperkingen: 3–64 tekens.\nBeveiligingsopmerking: (later invullen)\nTip: gebruikersnamen zijn hoofdlettergevoelig bij inloggen.',
        password:
          'Beperkingen: minimaal 8 tekens.\nBeveiligingsopmerking: (later invullen)\nTip: je wachtwoord wordt lokaal gebruikt om je privésleutel te ontsleutelen.',
        expirationDays:
          'Beperkingen: 7–365 dagen.\nBeveiligingsopmerking: (later invullen)\nTip: activiteit verlengt de vervaldatum (met privacy-jitter).',
      },
      entropy: {
        title: 'Entropie',
        instructions: 'Klik 10 keer op willekeurige plekken in het veld hieronder.',
        hits: 'Klikken: {hits}/{total}',
      },
      genericError: 'Er is iets misgegaan.',
      connectionLost: {
        title: 'Verbinding verloren',
        body: 'Realtime-verbinding is na meerdere pogingen mislukt. Je kunt de app opnieuw laden of uitloggen.',
      },
      settingsToast: {
        savedTitle: 'Opgeslagen',
        failedTitle: 'Bijwerken mislukt',
        otherDevicesLoggedOut: 'Andere apparaten zijn uitgelogd.',
        otherDevicesLoggedOutWiped: 'Andere apparaten zijn uitgelogd en hun sleutel is verwijderd.',
        hiddenModeOn: 'Verborgen modus ingeschakeld.',
        hiddenModeOff: 'Verborgen modus uitgeschakeld.',
        introvertModeOn: 'Introverte modus ingeschakeld.',
        introvertModeOff: 'Introverte modus uitgeschakeld.',
        expirationDaysSaved: 'Accountverval bijgewerkt naar {days} dagen.',
        serverError: 'Serverfout. Probeer het opnieuw.',
        notLoggedIn: 'Niet ingelogd.',
        vaultTooLarge: 'Te veel data om op te slaan.',
      },
      chats: 'Chats',
      chat: 'Chat',
      add: 'Toevoegen',
      addContact: 'Contact toevoegen',
      addFriend: 'Vriend toevoegen (gebruikersnaam)',
      friendPlaceholder: 'Gebruikersnaam',
      createChat: 'Chat maken',
      filterShow: 'Toon: {type}',
      filterAll: 'Alle',
      filterPrivate: 'Privé',
      filterGroups: 'Groepen',
      groupName: 'Groepsnaam',
      groupNamePlaceholder: 'bijv. Team',
      createGroup: 'Groep maken',
      noChats: 'Nog geen chats. Voeg een vriend toe op gebruikersnaam.',
      cannotChatWithSelf: 'Je kunt geen privéchat met jezelf maken.',
      deleteAccount: 'Account verwijderen',
      deleteAccountWarning:
        'Deze actie is onomkeerbaar. Je account wordt verwijderd en al je berichten in alle chats worden permanent verwijderd. Dit kan niet ongedaan worden gemaakt.',
      logoutOtherDevices: 'Andere apparaten uitloggen',
      logoutAndRemoveKeyOtherDevices: 'Andere apparaten uitloggen en sleutel verwijderen',
      reloadAppNoCache: 'App herladen (zonder cache)',
      deleteChat: 'Chat verwijderen',
      leaveGroup: 'Groep verlaten',
      addMember: 'Lid toevoegen',
      memberPlaceholder: 'Gebruikersnaam',
      memberAddedOk: 'Lid toegevoegd.',
      memberAlreadyInGroup: 'Deze gebruiker zit al in deze groep.',
      membersList: 'Ledenlijst',
      membersLoading: 'Leden laden…',
      noMembers: 'Geen leden.',
      renameGroup: 'Groep hernoemen',
      renameGroupPlaceholder: 'Nieuwe groepsnaam',
      renameGroupBadLength: 'Naam moet 3–64 tekens zijn.',
      deleteChatWarning:
        'Dit verwijdert deze chat permanent en wist alle berichten voor zowel jou als je vriend. Dit kan niet ongedaan worden gemaakt.',
      leaveGroupRemoveMyMessagesWarning:
        'Je verlaat deze groep en al jouw berichten in deze groep worden permanent verwijderd. Dit kan niet ongedaan worden gemaakt.',
      deleteGroup: 'Groep verwijderen',
      deleteGroupWarning:
        'Je bent de laatste deelnemer. Dit verwijdert de groep permanent en wist alle berichten. Dit kan niet ongedaan worden gemaakt.',
    },
    about: {
      title: 'Over',
      description:
        'TODO',
      copy: 'Kopiëren',
      repoLink: 'Git-repository',
    },
    theme: {
      label: 'Thema: {mode}',
      system: 'Systeem',
      dark: 'Donker',
      light: 'Licht',
      copiedTitle: 'Gekopieerd',
      copiedBody: 'Bericht gekopieerd naar klembord.',
      copyFailedTitle: 'Kopiëren mislukt',
      copyFailedBody: 'Kon bericht niet naar klembord kopiëren.',
      toggleAria: 'Thema wisselen',
    },
    settings: {
      title: 'Instellingen',
      youLabel: 'Jij:',
    },
    notifications: {
      settingsLabel: 'Meldingen:',
      settingsHint: 'Schakel meldingen in om oproep-/berichtalerts te krijgen wanneer de app op de achtergrond staat.',
      promptTitle: 'Meldingen inschakelen?',
      promptBody: 'Schakel meldingen in om oproep- en berichtalerts op je telefoon te ontvangen.',
      deniedBody: 'Meldingen zijn geblokkeerd in de browserinstellingen voor deze site.',
      enabledBody: 'Meldingen zijn ingeschakeld.',
      unsupportedBody: 'Meldingen worden niet ondersteund in deze browser.',
      enable: 'Meldingen inschakelen',
      notNow: 'Niet nu',
      state: {
        default: 'Niet ingeschakeld',
        granted: 'Ingeschakeld',
        denied: 'Geblokkeerd',
      },
    },
    sidebar: {
      groupChat: 'Publieke chat',
      noOneOnline: 'Er is momenteel niemand online.',
    },
    chat: {
      typeMessage: 'Typ een bericht...',
      replying: 'Antwoorden',
      replyingTo: 'Antwoorden aan {name}',
      replyTo: 'Antwoorden aan {name}',
      joinOngoingTitle: 'Deelnemen aan lopend gesprek?',
      joinOngoingBodyNamed: 'Je probeert deel te nemen aan het lopende gesprek van {name}.',
      joinOngoingBody: 'Je probeert deel te nemen aan een lopend gesprek.',
      callAria: 'Bellen',
      sendAria: 'Versturen',
    },
    call: {
      notInCall: 'Niet in gesprek',
      inCall: 'In gesprek: {names}',
      incomingFromLabel: 'Inkomende oproep van',
      incomingFrom: 'Inkomende oproep van {name}',
      unknown: 'Onbekend',
      waitingToJoinNamed: 'Wachten om aan te sluiten bij {name}…',
      waitingToJoin: 'Wachten om aan te sluiten…',
      requestingToJoinNamed: 'Verzoek om aan te sluiten bij {name}…',
      requestingToJoin: 'Verzoek om aan te sluiten…',
      calling: 'Bellen…',
      callingNamed: 'Bellen {name}…',
      ringing: 'Overgaan…',
      ringingNamed: 'Overgaan bij {name}…',
      inviting: 'Uitnodigen…',
      connecting: 'Verbinden…',
      connected: 'Verbonden',
      incomingCall: 'Inkomende oproep',
      incomingCallNamed: 'Inkomende oproep: {name}',
      callEnded: 'Gesprek beëindigd.',
      callRejected: 'Oproep geweigerd.',
      callFailed: 'Oproep mislukt: {reason}',
      joinFailed: 'Deelnemen mislukt.',
      joinFailedReason: 'Deelnemen mislukt: {reason}',
      from: 'Van {name}',
      accept: 'Accepteren',
      reject: 'Weigeren',
      cancelRequest: 'Verzoek intrekken',
      addToCall: 'Aan gesprek toevoegen',
      hangUp: 'Ophangen',
      joinRequestNamed: '{name} wil deelnemen aan dit gesprek.',
      joinRequestSomeone: 'Iemand wil deelnemen aan dit gesprek.',
      micPermissionDenied: 'Microfoon-toestemming geweigerd.',
      micNotFound: 'Geen microfoon gevonden.',
      micInUse: 'Microfoon is in gebruik.',
      micError: 'Microfoonfout.',
    },
    session: {
      enterName: 'Voer een naam in.',
      connecting: 'Verbinden…',
      nameTaken: 'Naam is al in gebruik.',
      invalidName: 'Ongeldige naam.',
      disconnected: 'Verbinding verbroken.',
      connectionError: 'Verbindingsfout.',
      turn: 'TURN {host}',
      udpRelayPortsRatio: 'UDP relay-poorten ~{used}/{total}',
      udpRelayPortsTotal: 'UDP relay-poorten {total}',
      udpRelayPortsUsed: 'UDP relay-poorten in gebruik ~{used}',
      estConfMax: 'schatting: max. ~{users} gebruikers',
      estCallsMax: 'schatting: max. ~{calls} 1:1-gesprekken',
    },
    confirm: {
      leave: 'Uitloggen en {appName} verlaten?',
      logoutAndRemoveKeyOtherDevices: 'Uitloggen op andere apparaten en de sleutel daar verwijderen? Dit verwijdert lokale toegang op die apparaten en kan niet ongedaan worden gemaakt.',
      deleteMessage: 'Dit bericht verwijderen?',
      deleteChat: 'Deze chat voor beide gebruikers verwijderen?',
      leaveGroup: 'Deze groep verlaten?',
    },
    lang: {
      en: 'English',
      nl: 'Nederlands',
      fr: 'Français',
      de: 'Deutsch',
      ru: 'Русский',
    },
  },

  fr: {
    common: {
      about: 'À propos',
      manageKeys: 'Gérer les clés',
      shareLink: 'Partager le lien',
      scanQr: 'Scanner QR',
      back: 'Retour',
      chat: 'Chat',
      close: 'Fermer',
      cancel: 'Annuler',
      proceed: 'Continuer',
      reply: 'Répondre',
      send: 'Envoyer',
      settings: 'Paramètres',
      users: 'Utilisateurs',
      online: 'En ligne',
      busy: 'occupé',
      language: 'Langue',
      unreadMessages: 'Messages non lus',
      logout: 'Déconnexion',
      edit: 'Modifier',
      delete: 'Supprimer',
      save: 'Enregistrer',
      modified: 'modifié',
      reload: 'Recharger',
    },
    toast: {
      chatSendFailedTitle: 'Message non envoyé',
      chatSendFailedBody: "Impossible de joindre le serveur. Vérifiez votre connexion et réessayez.",
      notificationsEnabledTitle: 'Notifications activées',
      notificationsEnabledBody: 'Les notifications push sont maintenant actives pour cet appareil.',
      notificationsFailedTitle: 'Notifications inactives',
      notificationsFailedBody:
        "L’autorisation a été accordée, mais la configuration push a échoué. Essayez de recharger l’application.",
      notificationsBlockedTitle: 'Notifications bloquées',
      notificationsBlockedBody:
        'Activez les notifications dans les paramètres de votre navigateur/app pour recevoir des notifications push.',
    },
    setup: {
      subtitle: 'Messagerie vocale web anonyme et chiffrée, sans inscription ni historique de conversation.',
      yourName: 'Votre nom',
      namePlaceholder: 'ex. Alex',
      join: 'Rejoindre',
    },
    shareLink: {
      hint: 'Partagez ce lien pour permettre à quelqu’un de créer une discussion privée avec vous après connexion.',
      linkLabel: 'Lien',
    },

    scanQr: {
      hint: 'Scannez un QR d’invitation pour ajouter l’utilisateur immédiatement.',
      cameraUnavailable: 'Aucune caméra disponible sur cet appareil.',
      cameraPermissionDenied: 'Accès à la caméra refusé. Autorisez l’accès et réessayez.',
      cameraStartFailed: 'Impossible de démarrer la caméra.',
      invalidInvite: "Ce QR code n’est pas un lien d’invitation valide pour ce site.",
      addFailedTitle: "Impossible d’ajouter l’utilisateur",
    },

    signed: {
      keys: {
        title: 'Gérer les clés',
        description:
          'À savoir :\n1. Pour vous connecter, il faut une clé dans le navigateur et le mot de passe.\n2. Connaître le nom d’utilisateur et le mot de passe sans la clé ne permet pas de se connecter.\n3. Avoir la clé sans le mot de passe ne permet pas de se connecter.\n4. Supprimer la clé entraîne une perte d’accès définitive et irréversible.\n5. Chaque compte a sa propre clé, créée localement sur l’appareil lors de l’inscription.\n6. Effacer complètement les données du navigateur ou supprimer le navigateur peut supprimer les clés de l’appareil.',
        countOnDevice: 'Clés trouvées : {count}',
        download: 'Télécharger',
        downloadUser: 'Télécharger la clé de {username}',
        downloadAll: 'Télécharger toutes les clés',
        downloadSpecific: 'Télécharger une clé spécifique',
        changePassword: 'Changer le mot de passe',
        addFromFile: 'Ajouter des clé(s) depuis un fichier',
        remove: 'Supprimer',
        removeAll: 'Supprimer toutes les clés locales',
        removeSpecific: 'Supprimer une clé spécifique',
        downloadAllOk: '{count} clé(s) téléchargée(s).',
        downloadOneOk: 'Clé téléchargée.',
        importBadFormat: 'Format de fichier invalide. Attendu : une entrée de clé JSON ou un tableau d’entrées de clés.',
        importResult:
          'Lues : {read}. Ajoutées : {added}. Ignorées (déjà présentes) : {ignored}. Invalides : {invalid}.',
        importConfirmHint: 'Vérifiez le récapitulatif et confirmez pour ajouter les clés à cet appareil.',
        importConfirmProceed: 'Ajouter les clés',
        specificHint:
          "Saisissez le nom d'utilisateur et le mot de passe pour trouver une entrée chiffrée correspondante. Cela ne vous connecte pas.",
        specificMissing: "Nom d'utilisateur et mot de passe requis.",
        specificNotFound: 'Aucune clé correspondante (nom d’utilisateur/mot de passe incorrect).',
        changePasswordHint:
          'Saisissez le nom d’utilisateur et le mot de passe actuel pour trouver une clé. Cela ne vous connecte pas.',
        changePasswordWarning:
          'Cette opération chiffrera la clé locale avec le nouveau mot de passe. Notez que cela n’aura aucun effet sur la même clé sur vos autres appareils ou sur les clés sauvegardées. Elles nécessiteront toujours l’ancien mot de passe et resteront entièrement valides pour la connexion.',
        newPassword: 'Nouveau mot de passe',
        repeatNewPassword: 'Répéter le nouveau mot de passe',
        changePasswordConfirm: 'Changer le mot de passe',
        changePasswordOk: 'Mot de passe mis à jour pour la clé locale.',
        changePasswordMismatch: 'Les mots de passe ne correspondent pas.',
        changePasswordNewMissing: 'Nouveau mot de passe requis.',
        removeConfirm:
          'Cela supprimera définitivement et de manière irréversible TOUTES les clés locales pour {count} compte(s) créés/importés sur cet appareil.\n\nVous serez déconnecté(e).',
        removeAllConfirm: 'Supprimer toutes les clés',
        removeAllOk: 'Toutes les clés locales ont été supprimées.',
        removeSpecificHint:
          'Saisissez le nom d’utilisateur et le mot de passe pour trouver la clé à supprimer. Cela ne vous connecte pas.',
        removeSpecificConfirmHint:
          'Clé trouvée pour {username}. La suppression effacera l’accès local pour ce compte sur cet appareil.\n\nCette action est irréversible.',
        removeSpecificConfirm: 'Supprimer la clé',
        removeOneOk: 'Clé supprimée.',
      },
      subtitle: 'Votre messagerie privée. Entièrement chiffrée, sans journaux, sans traces.',
      username: "Nom d'utilisateur",
      usernamePlaceholder: 'ex. alice',
      password: 'Mot de passe',
      passwordPlaceholder: 'Au moins 8 caractères',
      expirationDays: 'Expiration du compte (jours)',
      expirationDaysSettingsHelp: "Changez après combien de jours d'inactivité votre compte expire (stocké chiffré).",
      expirationDaysRangeInfo: 'Plage acceptée : 7–365 jours.',
      expirationDaysRangeError: 'Veuillez entrer un nombre entre 7 et 365.',
      expirationDaysUnlockHint: 'Déverrouillez vos clés pour modifier ce paramètre.',
      register: "S'inscrire",
      login: 'Se connecter',
      recreate: {
        title: 'Compte introuvable',
        body: 'Vous possédez une clé locale valide pour « {username} », mais ce nom d\'utilisateur n\'est pas enregistré sur le serveur. Voulez-vous créer un nouveau compte avec ce nom d\'utilisateur et cette clé ?',
        proceed: 'Continuer',
        expirationHint: 'Choisissez l\'expiration du compte (jours).',
        create: 'Créer le compte',
        cancel: 'Annuler',
      },
      stayLoggedIn: 'Rester connecté',
      stayLoggedInHelp:
        'Option dangereuse !\nNe l’activez pas sur un appareil partagé ou qui n’est pas le vôtre.\n\nUne copie des données du navigateur d’un appareil où vous êtes connecté donne un contrôle total sur le compte, sans possibilité de limitation.\n\nConserve la session sans date d’expiration.\n\nPratique si vous avez ajouté ce site à l’écran d’accueil de votre appareil mobile et l’utilisez comme une application.',
      autoUnlockOnDevice: 'Déverrouillage automatique sur cet appareil',
      youSignedInAs: 'Connecté en tant que',
      hiddenMode: 'Mode invisible',
      hiddenModeHelp: 'Lorsque activé, les autres ne verront pas votre statut en ligne/occupé.',
      introvertMode: 'Mode introverti',
      introvertModeHelp:
        'Lorsque activé, les autres ne peuvent pas créer de nouvelles discussions avec vous ni vous ajouter à des groupes. Les appels sont autorisés uniquement pour les utilisateurs qui partagent déjà une discussion privée avec vous.',
      errInvalidCredentials: "Nom d'utilisateur ou mot de passe invalide.",
      errUsernameExists: "Ce nom d'utilisateur existe déjà.",
      errUsernameUnsafe: "Le nom d'utilisateur contient des caractères non sûrs.",
      errUnauthorized: 'Session expirée. Veuillez vous reconnecter.',
      errNoLocalKey:
        "Aucune clé locale trouvée pour cet utilisateur sur cet appareil. Utilisez le bon mot de passe, ou inscrivez-vous à nouveau pour créer de nouvelles clés.",
      errPasswordTooLong: 'Le mot de passe doit comporter au maximum {max} caractères.',
      help: {
        usernameAria: "Aide : nom d'utilisateur",
        passwordAria: 'Aide : mot de passe',
        expirationDaysAria: "Aide : expiration du compte",
        stayLoggedInAria: 'Aide : rester connecté',
        username:
          'Limites : 3–64 caractères.\nNote de sécurité : (à compléter)\nAstuce : les noms d’utilisateur sont sensibles à la casse à la connexion.',
        password:
          'Limites : au moins 8 caractères.\nNote de sécurité : (à compléter)\nAstuce : votre mot de passe sert à déchiffrer votre clé privée localement.',
        expirationDays:
          'Limites : 7–365 jours.\nNote de sécurité : (à compléter)\nAstuce : l’activité prolonge l’expiration (avec jitter de confidentialité).',
      },
      entropy: {
        title: 'Entropie',
        instructions: 'Cliquez 10 fois à des endroits aléatoires dans le champ ci-dessous.',
        hits: 'Clics : {hits}/{total}',
      },
      genericError: 'Une erreur est survenue.',
      connectionLost: {
        title: 'Connexion perdue',
        body: "La connexion en temps réel a échoué après plusieurs tentatives. Vous pouvez recharger l’application ou vous déconnecter.",
      },
      settingsToast: {
        savedTitle: 'Enregistré',
        failedTitle: 'Mise à jour échouée',
        otherDevicesLoggedOut: 'Autres appareils déconnectés.',
        otherDevicesLoggedOutWiped: 'Autres appareils déconnectés et clé supprimée.',
        hiddenModeOn: 'Mode invisible activé.',
        hiddenModeOff: 'Mode invisible désactivé.',
        introvertModeOn: 'Mode introverti activé.',
        introvertModeOff: 'Mode introverti désactivé.',
        expirationDaysSaved: "Expiration du compte mise à jour à {days} jours.",
        serverError: 'Erreur serveur. Veuillez réessayer.',
        notLoggedIn: 'Non connecté(e).',
        vaultTooLarge: 'Données trop volumineuses pour être enregistrées.',
      },
      chats: 'Discussions',
      chat: 'Discussion',
      add: 'Ajouter',
      addContact: 'Ajouter un contact',
      addFriend: "Ajouter un ami (nom d'utilisateur)",
      friendPlaceholder: "Nom d'utilisateur",
      createChat: 'Créer une discussion',
      filterShow: 'Afficher : {type}',
      filterAll: 'Tout',
      filterPrivate: 'Privé',
      filterGroups: 'Groupes',
      groupName: 'Nom du groupe',
      groupNamePlaceholder: 'ex. Équipe',
      createGroup: 'Créer un groupe',
      noChats: "Aucune discussion. Ajoutez un ami par nom d'utilisateur.",
      cannotChatWithSelf: "Vous ne pouvez pas créer une discussion privée avec vous-même.",
      deleteAccount: 'Supprimer le compte',
      deleteAccountWarning:
        "Cette action est irréversible. Votre compte sera supprimé et tous vos messages dans toutes les discussions seront définitivement effacés. Cela ne peut pas être annulé.",
      logoutOtherDevices: 'Déconnecter les autres appareils',
      logoutAndRemoveKeyOtherDevices: 'Déconnecter et supprimer la clé sur les autres appareils',
      reloadAppNoCache: "Recharger l’application (sans cache)",
      deleteChat: 'Supprimer la discussion',
      leaveGroup: 'Quitter le groupe',
      addMember: 'Ajouter un membre',
      memberPlaceholder: "Nom d'utilisateur",
      memberAddedOk: 'Membre ajouté.',
      memberAlreadyInGroup: 'Cet utilisateur est déjà dans ce groupe.',
      membersList: 'Liste des membres',
      membersLoading: 'Chargement des membres…',
      noMembers: 'Aucun membre.',
      renameGroup: 'Renommer le groupe',
      renameGroupPlaceholder: 'Nouveau nom du groupe',
      renameGroupBadLength: 'Le nom doit contenir 3 à 64 caractères.',
      deleteChatWarning:
        'Cela supprimera définitivement cette discussion et effacera tous les messages pour vous et votre ami. Cette action est irréversible.',
      leaveGroupRemoveMyMessagesWarning:
        'Vous allez quitter ce groupe et tous vos messages dans ce groupe seront définitivement supprimés. Cette action est irréversible.',
      deleteGroup: 'Supprimer le groupe',
      deleteGroupWarning:
        'Vous êtes le dernier membre. Cela supprimera définitivement le groupe et effacera tous les messages. Cette action est irréversible.',
    },
    about: {
      title: 'À propos',
      description:
        "TODO",
      repoLink: 'Dépôt Git',
    },
    theme: {
      label: 'Thème : {mode}',
      copy: 'Copier',
      system: 'Système',
      dark: 'Sombre',
      light: 'Clair',
      toggleAria: 'Changer le thème',
    },
    settings: {
      title: 'Paramètres',
      copiedTitle: 'Copié',
      copiedBody: 'Message copié dans le presse-papiers.',
      copyFailedTitle: 'Échec de la copie',
      copyFailedBody: "Impossible de copier le message dans le presse-papiers.",
      youLabel: 'Vous :',
    },
    notifications: {
      settingsLabel: 'Notifications :',
      settingsHint: "Activez les notifications pour recevoir des alertes d'appel/message quand l'app est en arrière-plan.",
      promptTitle: 'Activer les notifications ?',
      promptBody: "Activez les notifications pour recevoir des alertes d'appel et de message sur votre téléphone.",
      deniedBody: 'Les notifications sont bloquées dans les paramètres du navigateur pour ce site.',
      enabledBody: 'Les notifications sont activées.',
      unsupportedBody: 'Les notifications ne sont pas prises en charge par ce navigateur.',
      enable: 'Activer les notifications',
      notNow: 'Pas maintenant',
      state: {
        default: 'Non activées',
        granted: 'Activées',
        denied: 'Bloquées',
      },
    },
    sidebar: {
      groupChat: 'Chat public',
      noOneOnline: "Personne n’est en ligne pour le moment.",
    },
    chat: {
      typeMessage: 'Écrivez un message...',
      replying: 'En réponse',
      replyingTo: 'Réponse à {name}',
      replyTo: 'Réponse à {name}',
      joinOngoingTitle: "Rejoindre l'appel en cours ?",
      joinOngoingBodyNamed: "Vous essayez de rejoindre l'appel en cours de {name}.",
      joinOngoingBody: "Vous essayez de rejoindre un appel en cours.",
      callAria: 'Appeler',
      sendAria: 'Envoyer',
    },
    call: {
      notInCall: "Pas en appel",
      inCall: 'En appel : {names}',
      incomingFromLabel: 'Appel entrant de',
      incomingFrom: 'Appel entrant de {name}',
      unknown: 'Inconnu',
      waitingToJoinNamed: 'En attente pour rejoindre {name}…',
      waitingToJoin: 'En attente pour rejoindre…',
      requestingToJoinNamed: 'Demande pour rejoindre {name}…',
      requestingToJoin: 'Demande pour rejoindre…',
      calling: 'Appel…',
      callingNamed: 'Appel à {name}…',
      ringing: 'Sonnerie…',
      ringingNamed: 'Sonnerie chez {name}…',
      inviting: 'Invitation…',
      connecting: 'Connexion…',
      connected: 'Connecté',
      incomingCall: 'Appel entrant',
      incomingCallNamed: 'Appel entrant : {name}',
      callEnded: "Appel terminé.",
      callRejected: 'Appel refusé.',
      callFailed: "Échec de l'appel : {reason}",
      joinFailed: 'Échec pour rejoindre.',
      joinFailedReason: 'Échec pour rejoindre : {reason}',
      from: 'De {name}',
      accept: 'Accepter',
      reject: 'Refuser',
      cancelRequest: 'Annuler la demande',
      addToCall: "Ajouter à l'appel",
      hangUp: 'Raccrocher',
      joinRequestNamed: '{name} veut rejoindre cet appel.',
      joinRequestSomeone: "Quelqu'un veut rejoindre cet appel.",
      micPermissionDenied: 'Autorisation du micro refusée.',
      micNotFound: 'Aucun micro trouvé.',
      micInUse: 'Le micro est utilisé.',
      micError: 'Erreur du micro.',
    },
    session: {
      enterName: 'Entrez un nom.',
      connecting: 'Connexion…',
      nameTaken: 'Nom déjà pris.',
      invalidName: 'Nom invalide.',
      disconnected: 'Déconnecté.',
      connectionError: 'Erreur de connexion.',
      turn: 'TURN {host}',
      udpRelayPortsRatio: 'Ports relais UDP ~{used}/{total}',
      udpRelayPortsTotal: 'Ports relais UDP {total}',
      udpRelayPortsUsed: 'Ports relais UDP utilisés ~{used}',
      estConfMax: 'estimation : max ~{users} utilisateurs',
      estCallsMax: 'estimation : max ~{calls} appels 1:1',
    },
    confirm: {
      leave: 'Se déconnecter et quitter {appName} ?',
      logoutAndRemoveKeyOtherDevices: 'Se déconnecter sur les autres appareils et y supprimer la clé ? Cela supprimera l’accès local sur ces appareils et ne peut pas être annulé.',
      deleteMessage: 'Supprimer ce message ?',
      deleteChat: 'Supprimer cette discussion pour les deux utilisateurs ?',
      leaveGroup: 'Quitter ce groupe ?',
    },
    lang: {
      en: 'English',
      nl: 'Nederlands',
      fr: 'Français',
      de: 'Deutsch',
      ru: 'Русский',
    },
  },

  de: {
    common: {
      about: 'Über',
      manageKeys: 'Schlüssel verwalten',
      shareLink: 'Link teilen',
      scanQr: 'QR scannen',
      back: 'Zurück',
      chat: 'Chat',
      close: 'Schließen',
      cancel: 'Abbrechen',
      proceed: 'Fortfahren',
      reply: 'Antworten',
      send: 'Senden',
      settings: 'Einstellungen',
      users: 'Nutzer',
      online: 'Online',
      busy: 'besetzt',
      language: 'Sprache',
      unreadMessages: 'Ungelesene Nachrichten',
      logout: 'Abmelden',
      modified: 'bearbeitet',
      reload: 'Neu laden',
    },
    toast: {
      chatSendFailedTitle: 'Nachricht nicht gesendet',
      chatSendFailedBody: 'Server nicht erreichbar. Bitte Verbindung prüfen und erneut versuchen.',
      notificationsEnabledTitle: 'Benachrichtigungen aktiviert',
      notificationsEnabledBody: 'Push-Benachrichtigungen sind jetzt für dieses Gerät aktiv.',
      notificationsFailedTitle: 'Benachrichtigungen nicht aktiv',
      notificationsFailedBody:
        'Berechtigung wurde erteilt, aber die Push-Einrichtung ist fehlgeschlagen. Versuche die App neu zu laden.',
      notificationsBlockedTitle: 'Benachrichtigungen blockiert',
      notificationsBlockedBody:
        'Aktiviere Benachrichtigungen in den Browser-/App-Einstellungen, um Push-Benachrichtigungen zu erhalten.',
    },
    setup: {
      subtitle: 'Anonymer, verschlüsselter Voice-Web-Messenger ohne Registrierung und ohne Chatverlauf.',
      yourName: 'Dein Name',
      namePlaceholder: 'z. B. Alex',
      join: 'Beitreten',
    },
    shareLink: {
      hint: 'Teile diesen Link, damit jemand nach dem Anmelden einen privaten Chat mit dir erstellen kann.',
      linkLabel: 'Link',
    },

    scanQr: {
      hint: 'Scanne einen Einladungs-QR, um den Nutzer sofort hinzuzufügen.',
      cameraUnavailable: 'Keine Kamera auf diesem Gerät verfügbar.',
      cameraPermissionDenied: 'Kamerazugriff verweigert. Bitte Zugriff erlauben und erneut versuchen.',
      cameraStartFailed: 'Kamera konnte nicht gestartet werden.',
      invalidInvite: 'Dieser QR-Code ist kein gültiger Einladungslink für diese Seite.',
      addFailedTitle: 'Nutzer kann nicht hinzugefügt werden',
    },
    signed: {
      keys: {
        title: 'Schlüssel verwalten',
        description:
          'Was du wissen musst:\n1. Zum Anmelden brauchst du einen Schlüssel im Browser und das Passwort.\n2. Benutzername und Passwort ohne Schlüssel reichen nicht zum Anmelden.\n3. Ein Schlüssel ohne Passwort reicht nicht zum Anmelden.\n4. Das Löschen des Schlüssels führt zum permanenten und unwiederbringlichen Verlust des Zugriffs.\n5. Jedes Konto hat seinen eigenen Schlüssel, der bei der Registrierung lokal auf dem Gerät erstellt wird.\n6. Das vollständige Löschen der Browserdaten oder das Entfernen des Browsers kann die Schlüssel vom Gerät löschen.',
        countOnDevice: 'Gefundene Schlüssel: {count}',
        download: 'Herunterladen',
        downloadUser: 'Schlüssel von {username} herunterladen',
        downloadAll: 'Alle Schlüssel herunterladen',
        downloadSpecific: 'Einen bestimmten Schlüssel herunterladen',
        changePassword: 'Passwort ändern',
        addFromFile: 'Schlüssel aus Datei hinzufügen',
        remove: 'Entfernen',
        removeAll: 'Alle lokalen Schlüssel entfernen',
        removeSpecific: 'Einen bestimmten Schlüssel entfernen',
        downloadAllOk: '{count} Schlüssel heruntergeladen.',
        downloadOneOk: 'Schlüssel heruntergeladen.',
        importBadFormat:
          'Ungültiges Dateiformat. Erwartet wird ein JSON-Schlüsseleintrag oder ein Array von Schlüsseln.',
        importResult:
          'Gelesen: {read}. Hinzugefügt: {added}. Ignoriert (bereits vorhanden): {ignored}. Ungültig: {invalid}.',
        importConfirmHint: 'Prüfe die Zusammenfassung und bestätige, um Schlüssel auf diesem Gerät hinzuzufügen.',
        importConfirmProceed: 'Schlüssel hinzufügen',
        specificHint:
          'Gib Benutzername und Passwort ein, um einen passenden verschlüsselten Eintrag zu finden. Das meldet dich nicht an.',
        specificMissing: 'Benutzername und Passwort erforderlich.',
        specificNotFound: 'Kein passender Schlüssel gefunden (Benutzername/Passwort stimmt nicht).',
        changePasswordHint: 'Gib Benutzername und aktuelles Passwort ein, um einen Schlüssel zu finden. Das meldet dich nicht an.',
        changePasswordWarning:
          'Dieser Vorgang verschlüsselt den lokalen Schlüssel mit dem neuen Passwort. Hinweis: Das wirkt sich nicht auf denselben Schlüssel auf deinen anderen Geräten oder auf gesicherte Schlüssel aus. Dort wird weiterhin das alte Passwort benötigt und sie bleiben vollständig gültig für den Login.',
        newPassword: 'Neues Passwort',
        repeatNewPassword: 'Neues Passwort wiederholen',
        changePasswordConfirm: 'Passwort ändern',
        changePasswordOk: 'Passwort für lokalen Schlüssel aktualisiert.',
        changePasswordMismatch: 'Passwörter stimmen nicht überein.',
        changePasswordNewMissing: 'Neues Passwort erforderlich.',
        removeConfirm:
          'Das löscht dauerhaft und unwiderruflich ALLE lokalen Schlüssel für {count} Konto/Konten, die auf diesem Gerät erstellt/importiert wurden.\n\nDu wirst abgemeldet.',
        removeAllConfirm: 'Alle Schlüssel entfernen',
        removeAllOk: 'Alle lokalen Schlüssel entfernt.',
        removeSpecificHint:
          'Gib Benutzername und Passwort ein, um einen Schlüssel zum Entfernen zu finden. Das meldet dich nicht an.',
        removeSpecificConfirmHint:
          'Schlüssel für {username} gefunden. Das Entfernen löscht den lokalen Zugriff für dieses Konto auf diesem Gerät.\n\nDies kann nicht rückgängig gemacht werden.',
        removeSpecificConfirm: 'Schlüssel entfernen',
        removeOneOk: 'Schlüssel entfernt.',
      },
      subtitle: 'Dein eigener privater Messenger. Vollständig verschlüsselt, keine Logs, keine Spuren.',
      username: 'Benutzername',
      usernamePlaceholder: 'z. B. alice',
      password: 'Passwort',
      passwordPlaceholder: 'Mindestens 8 Zeichen',
      expirationDays: 'Kontoablauf (Tage)',
      expirationDaysSettingsHelp: 'Lege fest, nach wie vielen Tagen Inaktivität dein Konto abläuft (verschlüsselt gespeichert).',
      expirationDaysRangeInfo: 'Zulässiger Bereich: 7–365 Tage.',
      expirationDaysRangeError: 'Bitte gib eine Zahl zwischen 7 und 365 ein.',
      expirationDaysUnlockHint: 'Entsperre deine Schlüssel, um diese Einstellung zu ändern.',
      register: 'Registrieren',
      login: 'Anmelden',
      recreate: {
        title: 'Konto nicht gefunden',
        body: 'Du hast einen gültigen lokalen Schlüssel für „{username}“, aber dieser Benutzername ist nicht auf dem Server registriert. Möchtest du mit diesem Benutzernamen und Schlüssel ein neues Konto erstellen?',
        proceed: 'Weiter',
        expirationHint: 'Wähle die Konto-Ablaufzeit (Tage).',
        create: 'Konto erstellen',
        cancel: 'Abbrechen',
      },
      stayLoggedIn: 'Angemeldet bleiben',
      stayLoggedInHelp:
        'Unsichere Option!\nNicht auf fremden oder gemeinsam genutzten Geräten aktivieren.\n\nEine Kopie der Browserdaten von einem Gerät, auf dem du angemeldet bist, ermöglicht volle Kontrolle über das Konto – ohne Möglichkeit, das einzuschränken.\n\nSpeichert die Sitzung ohne Ablauf.\n\nPraktisch, wenn du diese Seite zum Startbildschirm deines Mobilgeräts hinzugefügt hast und sie wie eine App nutzt.',
      autoUnlockOnDevice: 'Automatisch auf diesem Gerät entsperren',
      youSignedInAs: 'Angemeldet als',
      hiddenMode: 'Versteckter Modus',
      hiddenModeHelp: 'Wenn aktiviert, sehen andere deinen Online-/Beschäftigt-Status nicht.',
      introvertMode: 'Introvertierter Modus',
      introvertModeHelp:
        'Wenn aktiviert, können andere keine neuen Chats mit dir erstellen oder dich zu Gruppen hinzufügen. Anrufe sind nur für Nutzer erlaubt, die bereits einen privaten Chat mit dir teilen.',
      errInvalidCredentials: 'Ungültiger Benutzername oder Passwort.',
      errUsernameExists: 'Benutzername existiert bereits.',
      errUsernameUnsafe: 'Benutzername enthält unsichere Zeichen.',
      errUnauthorized: 'Sitzung abgelaufen. Bitte erneut anmelden.',
      errNoLocalKey:
        'Kein lokaler Schlüssel für diesen Benutzer auf diesem Gerät gefunden. Verwende das richtige Passwort oder registriere dich erneut, um neue Schlüssel zu erstellen.',
      errPasswordTooLong: 'Passwort darf höchstens {max} Zeichen lang sein.',
      help: {
        usernameAria: 'Hilfe: Benutzername',
        passwordAria: 'Hilfe: Passwort',
        expirationDaysAria: 'Hilfe: Kontoablauf',
        stayLoggedInAria: 'Hilfe: angemeldet bleiben',
        username:
          'Einschränkungen: 3–64 Zeichen.\nSicherheitshinweis: (später ausfüllen)\nTipp: Benutzernamen sind beim Login case-sensitiv.',
        password:
          'Einschränkungen: mindestens 8 Zeichen.\nSicherheitshinweis: (später ausfüllen)\nTipp: Dein Passwort wird lokal genutzt, um deinen privaten Schlüssel zu entschlüsseln.',
        expirationDays:
          'Einschränkungen: 7–365 Tage.\nSicherheitshinweis: (später ausfüllen)\nTipp: Aktivität verlängert den Ablauf (mit Privacy-Jitter).',
      },
      entropy: {
        title: 'Entropie',
        instructions: 'Klicke 10-mal an zufällige Stellen im Feld unten.',
        hits: 'Klicks: {hits}/{total}',
      },
      genericError: 'Etwas ist schiefgelaufen.',
      connectionLost: {
        title: 'Verbindung verloren',
        body: 'Die Echtzeitverbindung ist nach mehreren Versuchen fehlgeschlagen. Du kannst die App neu laden oder dich abmelden.',
      },
      settingsToast: {
        savedTitle: 'Gespeichert',
        failedTitle: 'Aktualisierung fehlgeschlagen',
        otherDevicesLoggedOut: 'Andere Geräte wurden abgemeldet.',
        otherDevicesLoggedOutWiped: 'Andere Geräte wurden abgemeldet und der Schlüssel wurde entfernt.',
        hiddenModeOn: 'Versteckter Modus aktiviert.',
        hiddenModeOff: 'Versteckter Modus deaktiviert.',
        introvertModeOn: 'Introvertierter Modus aktiviert.',
        introvertModeOff: 'Introvertierter Modus deaktiviert.',
        expirationDaysSaved: 'Kontoablauf auf {days} Tage aktualisiert.',
        serverError: 'Serverfehler. Bitte erneut versuchen.',
        notLoggedIn: 'Nicht angemeldet.',
        vaultTooLarge: 'Zu viele Daten zum Speichern.',
      },
      chats: 'Chats',
      chat: 'Chat',
      add: 'Hinzufügen',
      addContact: 'Kontakt hinzufügen',
      addFriend: 'Freund hinzufügen (Benutzername)',
      friendPlaceholder: 'Benutzername',
      createChat: 'Chat erstellen',
      filterShow: 'Anzeigen: {type}',
      filterAll: 'Alle',
      filterPrivate: 'Privat',
      filterGroups: 'Gruppen',
      groupName: 'Gruppenname',
      groupNamePlaceholder: 'z. B. Team',
      createGroup: 'Gruppe erstellen',
      noChats: 'Noch keine Chats. Füge einen Freund per Benutzername hinzu.',
      cannotChatWithSelf: 'Du kannst keinen privaten Chat mit dir selbst erstellen.',
      deleteAccount: 'Konto löschen',
      deleteAccountWarning:
        'Diese Aktion ist unwiderruflich. Dein Konto wird gelöscht und alle deine Nachrichten in allen Chats werden dauerhaft entfernt. Das kann nicht rückgängig gemacht werden.',
      logoutOtherDevices: 'Andere Geräte abmelden',
      logoutAndRemoveKeyOtherDevices: 'Andere Geräte abmelden und Schlüssel entfernen',
      reloadAppNoCache: 'App neu laden (ohne Cache)',
      addMember: 'Mitglied hinzufügen',
      memberPlaceholder: 'Benutzername',
      memberAddedOk: 'Mitglied hinzugefügt.',
      memberAlreadyInGroup: 'Dieser Benutzer ist bereits in dieser Gruppe.',
      membersList: 'Mitgliederliste',
      membersLoading: 'Mitglieder werden geladen…',
      noMembers: 'Keine Mitglieder.',
      renameGroup: 'Gruppe umbenennen',
      renameGroupPlaceholder: 'Neuer Gruppenname',
      renameGroupBadLength: 'Name muss 3–64 Zeichen lang sein.',
      deleteChatWarning:
        'Dies löscht diesen Chat dauerhaft und entfernt alle Nachrichten für dich und deinen Freund. Das kann nicht rückgängig gemacht werden.',
      leaveGroupRemoveMyMessagesWarning:
        'Du verlässt diese Gruppe und alle deine Nachrichten darin werden dauerhaft gelöscht. Das kann nicht rückgängig gemacht werden.',
      deleteGroup: 'Gruppe löschen',
      deleteGroupWarning:
        'Du bist das letzte Mitglied. Das löscht die Gruppe dauerhaft und entfernt alle Nachrichten. Das kann nicht rückgängig gemacht werden.',
      deleteChat: 'Chat löschen',
      leaveGroup: 'Gruppe verlassen',
    },
    about: {
      title: 'Über',
      description:
        'TODO',
      repoLink: 'Git-Repository',
    },
    theme: {
      label: 'Thema: {mode}',
      system: 'System',
      copy: 'Kopieren',
      dark: 'Dunkel',
      light: 'Hell',
      toggleAria: 'Thema wechseln',
    },
      modified: 'bearbeitet',
    settings: {
      title: 'Einstellungen',
      copiedTitle: 'Kopiert',
      copiedBody: 'Nachricht in die Zwischenablage kopiert.',
      copyFailedTitle: 'Kopieren fehlgeschlagen',
      copyFailedBody: 'Nachricht konnte nicht in die Zwischenablage kopiert werden.',
      youLabel: 'Du:',
    },
    notifications: {
      settingsLabel: 'Benachrichtigungen:',
      settingsHint: 'Aktiviere Benachrichtigungen, um Anruf-/Nachrichtenhinweise im Hintergrund zu erhalten.',
      promptTitle: 'Benachrichtigungen aktivieren?',
      promptBody: 'Aktiviere Benachrichtigungen, um Anruf- und Nachrichtenhinweise auf deinem Handy zu erhalten.',
      deniedBody: 'Benachrichtigungen sind in den Browser-Einstellungen für diese Seite blockiert.',
      enabledBody: 'Benachrichtigungen sind aktiviert.',
      unsupportedBody: 'Benachrichtigungen werden in diesem Browser nicht unterstützt.',
      enable: 'Benachrichtigungen aktivieren',
      notNow: 'Nicht jetzt',
      state: {
        default: 'Nicht aktiviert',
        granted: 'Aktiviert',
        denied: 'Blockiert',
      },
    },
    sidebar: {
      groupChat: 'Öffentlicher Chat',
      noOneOnline: 'Im Moment ist niemand online.',
    },
    chat: {
      typeMessage: 'Nachricht schreiben...',
      replying: 'Antworten',
      replyingTo: 'Antwort an {name}',
      replyTo: 'Antwort an {name}',
      joinOngoingTitle: 'Einem laufenden Anruf beitreten?',
      joinOngoingBodyNamed: 'Du versuchst, dem laufenden Anruf von {name} beizutreten.',
      joinOngoingBody: 'Du versuchst, einem laufenden Anruf beizutreten.',
      callAria: 'Anrufen',
      sendAria: 'Senden',
    },
    call: {
      notInCall: 'Nicht im Anruf',
      inCall: 'Im Anruf: {names}',
      incomingFromLabel: 'Eingehender Anruf von',
      incomingFrom: 'Eingehender Anruf von {name}',
      unknown: 'Unbekannt',
      waitingToJoinNamed: 'Warten auf Beitritt zu {name}…',
      waitingToJoin: 'Warten auf Beitritt…',
      requestingToJoin: 'Beitritt anfragen…',
      calling: 'Rufe an…',
      callingNamed: 'Rufe {name} an…',
      ringing: 'Klingeln…',
      ringingNamed: 'Klingelt bei {name}…',
      inviting: 'Einladen…',
      connecting: 'Verbinden…',
      connected: 'Verbunden',
      incomingCall: 'Eingehender Anruf',
      incomingCallNamed: 'Eingehender Anruf: {name}',
      callEnded: 'Anruf beendet.',
      callRejected: 'Anruf abgelehnt.',
      callFailed: 'Anruf fehlgeschlagen: {reason}',
      joinFailed: 'Beitritt fehlgeschlagen.',
      joinFailedReason: 'Beitritt fehlgeschlagen: {reason}',
      from: 'Von {name}',
      accept: 'Annehmen',
      reject: 'Ablehnen',
      cancelRequest: 'Anfrage zurückziehen',
      addToCall: 'Zum Anruf hinzufügen',
      hangUp: 'Auflegen',
      joinRequestNamed: '{name} möchte diesem Anruf beitreten.',
      joinRequestSomeone: 'Jemand möchte diesem Anruf beitreten.',
      micPermissionDenied: 'Mikrofonberechtigung verweigert.',
      micNotFound: 'Kein Mikrofon gefunden.',
      micInUse: 'Mikrofon wird bereits verwendet.',
      micError: 'Mikrofonfehler.',
    },
    session: {
      enterName: 'Name eingeben.',
      connecting: 'Verbinden…',
      nameTaken: 'Name ist bereits vergeben.',
      invalidName: 'Ungültiger Name.',
      disconnected: 'Getrennt.',
      connectionError: 'Verbindungsfehler.',
      turn: 'TURN {host}',
      udpRelayPortsRatio: 'UDP-Relay-Ports ~{used}/{total}',
      udpRelayPortsTotal: 'UDP-Relay-Ports {total}',
      udpRelayPortsUsed: 'UDP-Relay-Ports in Benutzung ~{used}',
      estConfMax: 'Schätzung: max. ~{users} Nutzer',
      estCallsMax: 'Schätzung: max. ~{calls} 1:1-Anrufe',
    },
    confirm: {
      leave: '{appName} verlassen und abmelden?',
      logoutAndRemoveKeyOtherDevices: 'Auf anderen Geräten abmelden und den Schlüssel dort entfernen? Dadurch wird der lokale Zugriff auf diesen Geräten gelöscht und das kann nicht rückgängig gemacht werden.',
      leaveGroup: 'Diese Gruppe verlassen?',
    },
    lang: {
      en: 'English',
      nl: 'Nederlands',
      fr: 'Français',
      de: 'Deutsch',
      ru: 'Русский',
    },
  },

  ru: {
    common: {
      about: 'О приложении',
      manageKeys: 'Управление ключами',
      shareLink: 'Поделиться ссылкой',
      scanQr: 'Сканировать QR',
      back: 'Назад',
      chat: 'Чат',
      close: 'Закрыть',
      cancel: 'Отмена',
      proceed: 'Продолжить',
      reply: 'Ответить',
      send: 'Отправить',
      settings: 'Настройки',
      users: 'Пользователи',
      online: 'Онлайн',
      busy: 'занят',
      language: 'Язык',
      unreadMessages: 'Непрочитанные сообщения',
      logout: 'Выйти',
      edit: 'Редактировать',
      delete: 'Удалить',
      save: 'Сохранить',
      modified: 'изменено',
      reload: 'Перезагрузить',
    },
    toast: {
      chatSendFailedTitle: 'Сообщение не отправлено',
      chatSendFailedBody: 'Не удалось связаться с сервером. Проверьте подключение и попробуйте снова.',
      notificationsEnabledTitle: 'Уведомления включены',
      notificationsEnabledBody: 'Push-уведомления теперь активны на этом устройстве.',
      notificationsFailedTitle: 'Уведомления не активны',
      notificationsFailedBody: 'Разрешение получено, но настройка push не удалась. Попробуйте перезагрузить приложение.',
      notificationsBlockedTitle: 'Уведомления заблокированы',
      notificationsBlockedBody:
        'Включите уведомления в настройках браузера/приложения, чтобы получать push-уведомления.',
    },
    setup: {
      subtitle: 'Анонимный зашифрованный голосовой веб мессенджер без регистрации и хранения истории переписки',
      yourName: 'Ваше имя',
      namePlaceholder: 'напр. Алекс',
      join: 'Присоединиться',
    },
    shareLink: {
      hint: 'Поделитесь этой ссылкой, чтобы после входа пользователь смог создать с вами личный чат.',
      linkLabel: 'Ссылка',
    },

    scanQr: {
      hint: 'Отсканируйте QR-приглашение, чтобы сразу добавить пользователя.',
      cameraUnavailable: 'Камера недоступна на этом устройстве.',
      cameraPermissionDenied: 'Доступ к камере запрещён. Разрешите доступ и попробуйте снова.',
      cameraStartFailed: 'Не удалось запустить камеру.',
      invalidInvite: 'Этот QR-код не является действительной ссылкой-приглашением для этого сайта.',
      addFailedTitle: 'Не удалось добавить пользователя',
    },

    signed: {
      keys: {
        title: 'Управление ключами',
        description:
          'Что нужно знать:\n1. Для входа в систему необходимо наличие ключа в браузере и знание пароля.\n2. Знание логина и пароля при отсутвии ключа не позволит войти.\n3. Наличие ключа без знания пароля не позволит войти в систему.\n4. Удаление ключа ведет к безвозвратной потере доступа.\n5. У каждого аккаунта свой ключ, который создается локально на устройстве в момент регистрации.\n6. Полная очистка истории браузера или удаление браузера может повлечь удаление ключей с устройства.',
        countOnDevice: 'Найдено ключей: {count}',
        download: 'Скачать',
        downloadUser: 'Скачать ключ {username}',
        downloadAll: 'Скачать все ключи',
        downloadSpecific: 'Скачать конкретный ключ',
        changePassword: 'Сменить пароль',
        addFromFile: 'Добавить ключ(и) из файла',
        remove: 'Удалить',
        removeAll: 'Удалить все локальные ключи',
        removeSpecific: 'Удалить конкретный ключ',
        downloadAllOk: 'Скачано ключей: {count}.',
        downloadOneOk: 'Ключ скачан.',
        importBadFormat:
          'Неверный формат файла. Ожидается JSON-запись ключа или массив JSON-записей ключей.',
        importResult:
          'Прочитано: {read}. Добавлено: {added}. Пропущено (уже есть): {ignored}. Неверных: {invalid}.',
        importConfirmHint: 'Проверьте итог и подтвердите добавление ключей на это устройство.',
        importConfirmProceed: 'Добавить ключи',
        specificHint:
          'Введите имя пользователя и пароль, чтобы найти подходящую зашифрованную запись. Это не выполняет вход.',
        specificMissing: 'Требуются имя пользователя и пароль.',
        specificNotFound: 'Подходящий ключ не найден (имя пользователя/пароль не совпадают).',
        changePasswordHint: 'Введите имя пользователя и текущий пароль, чтобы найти ключ. Это не выполняет вход.',
        changePasswordWarning:
          'Эта операция зашифрует локальный ключ новым паролем. Обратите внимание: это не повлияет на такой же ключ на других устройствах или на резервные копии. Там по‑прежнему будет требоваться старый пароль, и эти ключи останутся полностью действительными для входа.',
        newPassword: 'Новый пароль',
        repeatNewPassword: 'Повторите новый пароль',
        changePasswordConfirm: 'Сменить пароль',
        changePasswordOk: 'Пароль для локального ключа обновлён.',
        changePasswordMismatch: 'Пароли не совпадают.',
        changePasswordNewMissing: 'Требуется новый пароль.',
        removeConfirm:
          'Это навсегда и безвозвратно удалит ВСЕ локальные ключи для {count} аккаунта(ов), созданных/импортированных на этом устройстве.\n\nВы будете разлогинены.',
        removeAllConfirm: 'Удалить все ключи',
        removeAllOk: 'Все локальные ключи удалены.',
        removeSpecificHint: 'Введите имя пользователя и пароль, чтобы найти ключ для удаления. Это не выполнит вход.',
        removeSpecificConfirmHint:
          'Ключ для {username} найден. Удаление навсегда удалит локальный доступ к этому аккаунту на этом устройстве.\n\nЭто нельзя отменить.',
        removeSpecificConfirm: 'Удалить ключ',
        removeOneOk: 'Ключ удалён.',
      },
      subtitle: 'Ваш личный мессенджер. Полностью зашифрован, без логов и следов.',
      username: 'Имя пользователя',
      usernamePlaceholder: 'напр. alice',
      password: 'Пароль',
      passwordPlaceholder: 'Минимум 8 символов',
      expirationDays: 'Срок действия аккаунта (дни)',
      expirationDaysSettingsHelp: 'Измените, через сколько дней бездействия аккаунт истекает (хранится в зашифрованном виде).',
      expirationDaysRangeInfo: 'Допустимый диапазон: 7–365 дней.',
      expirationDaysRangeError: 'Введите число от 7 до 365.',
      expirationDaysUnlockHint: 'Разблокируйте ключи, чтобы изменить этот параметр.',
      register: 'Регистрация',
      login: 'Вход',
      recreate: {
        title: 'Аккаунт не найден',
        body: 'У вас есть действующий локальный ключ для «{username}», но такого имени нет на сервере. Создать новый аккаунт с этим именем и ключом?',
        proceed: 'Продолжить',
        expirationHint: 'Выберите срок действия аккаунта (дней).',
        create: 'Создать аккаунт',
        cancel: 'Отмена',
      },
      stayLoggedIn: 'Оставаться в системе',
      stayLoggedInHelp: 'Небезопасное действие!\nНе выбирайте на чужих или общих устройствах.\n\nКопия данных браузера с устройства, где выполнен вход дает полный контроль над логином без возможности его ограничения.\n\nСохраняет сессию без ограничения срока.\n\nУдобно для использования, если вы добавили этот сайт на рабочий стол мобильного устройтва и пользуетесь им как приложением.',
      autoUnlockOnDevice: 'Авто-разблокировка на этом устройстве',
      youSignedInAs: 'Вы вошли как',
      hiddenMode: 'Скрытый режим',
      hiddenModeHelp: 'Если включено, другие не увидят ваш статус онлайн/занят.',
      introvertMode: 'Режим интроверта',
      introvertModeHelp:
        'Если включено, другие не смогут создавать с вами новые чаты или добавлять вас в группы. Звонки разрешены только пользователям, которые уже имеют с вами личный чат.',
      errInvalidCredentials: 'Неверное имя пользователя или пароль.',
      errUsernameExists: 'Имя пользователя уже существует.',
      errUsernameUnsafe: 'Имя пользователя содержит небезопасные символы.',
      errUnauthorized: 'Сессия истекла. Войдите снова.',
      errNoLocalKey:
        'Локальный ключ для этого пользователя на этом устройстве не найден. Используйте правильный пароль или зарегистрируйтесь снова, чтобы создать новые ключи.',
      errPasswordTooLong: 'Пароль должен быть не длиннее {max} символов.',
      help: {
        usernameAria: 'Справка: имя пользователя',
        passwordAria: 'Справка: пароль',
        expirationDaysAria: 'Справка: срок действия аккаунта',
        stayLoggedInAria: 'Справка: оставаться в системе',
        username:
          '3–64 символа, регистр букв важен.\n\nИмя храниться в составе локального ключа в зашифрованном виде. На сервере имя доступно в открытом виде.',
        password:
          'Минимум 8 символов, невозможно восстановить.\n\nПароль необходим исключительно для расшифровки локального ключа. Если локального ключа нет, то знание пароля не позволит войти в систему.\n\nОн не передается на сервер ни явно, ни в виде хеша и не используется для авторизации.',
        expirationDays:
          '7–365 дней.\n\nВсе аккаунты временные, но каждый раз при заходе вы обновляете срок действия аккаунта.\n\nПосле истечения срока аккант будет удален с сервера вместе со всеми его сообщениями, приватными чатами и следами.',
      },
      entropy: {
        title: 'Энтропия',
        instructions: 'Нажмите 10 раз в случайных местах внутри поля ниже.',
        hits: 'Нажатия: {hits}/{total}',
      },
      genericError: 'Что-то пошло не так.',
      connectionLost: {
        title: 'Соединение потеряно',
        body: 'Соединение в реальном времени не удалось после нескольких попыток. Вы можете перезагрузить приложение или выйти.',
      },
      settingsToast: {
        savedTitle: 'Сохранено',
        failedTitle: 'Не удалось обновить',
        otherDevicesLoggedOut: 'Другие устройства вышли из аккаунта.',
        otherDevicesLoggedOutWiped: 'Другие устройства вышли и ключ удалён.',
        hiddenModeOn: 'Скрытый режим включён.',
        hiddenModeOff: 'Скрытый режим выключен.',
        introvertModeOn: 'Режим интроверта включён.',
        introvertModeOff: 'Режим интроверта выключен.',
        expirationDaysSaved: 'Срок действия аккаунта обновлён до {days} дней.',
        serverError: 'Ошибка сервера. Попробуйте ещё раз.',
        notLoggedIn: 'Вы не вошли в систему.',
        vaultTooLarge: 'Слишком много данных для сохранения.',
      },
      chats: 'Чаты',
      chat: 'Чат',
      add: 'Добавить',
      addContact: 'Добавить контакт',
      addFriend: 'Добавить друга (имя пользователя)',
      friendPlaceholder: 'Имя пользователя',
      createChat: 'Создать чат',
      filterShow: 'Показать: {type}',
      filterAll: 'Все',
      filterPrivate: 'Личные',
      filterGroups: 'Группы',
      groupName: 'Название группы',
      groupNamePlaceholder: 'напр. Команда',
      createGroup: 'Создать группу',
      noChats: 'Пока нет чатов. Добавьте друга по имени пользователя.',
      cannotChatWithSelf: 'Нельзя создать личный чат с самим собой.',
      deleteAccount: 'Удалить аккаунт',
      deleteAccountWarning:
        'Это действие необратимо. Ваш аккаунт будет удалён, и все ваши сообщения во всех чатах будут удалены навсегда. Это нельзя отменить.',
      logoutOtherDevices: 'Выйти на других устройствах',
      logoutAndRemoveKeyOtherDevices: 'Выйти и удалить ключ на других устройствах',
      reloadAppNoCache: 'Перезагрузить приложение (без кэша)',
      deleteChat: 'Удалить чат',
      leaveGroup: 'Выйти из группы',
      addMember: 'Добавить участника',
      memberPlaceholder: 'Имя пользователя',
      memberAddedOk: 'Участник добавлен.',
      memberAlreadyInGroup: 'Этот пользователь уже состоит в этой группе.',
      membersList: 'Список участников',
      membersLoading: 'Загрузка участников…',
      noMembers: 'Участников нет.',
      renameGroup: 'Переименовать группу',
      renameGroupPlaceholder: 'Новое название группы',
      renameGroupBadLength: 'Название должно быть длиной 3–64 символа.',
      deleteChatWarning:
        'Это навсегда удалит чат и удалит все сообщения как у вас, так и у вашего собеседника. Отменить это нельзя.',
      leaveGroupRemoveMyMessagesWarning:
        'Вы выйдете из этой группы, и все ваши сообщения в ней будут навсегда удалены. Отменить это нельзя.',
      deleteGroup: 'Удалить группу',
      deleteGroupWarning:
        'Вы — последний участник. Это навсегда удалит группу и все сообщения. Отменить это нельзя.',
    },
    about: {
      title: 'О приложении',
      description:
        'TODO',
      repoLink: 'Исходный код',
    },
    theme: {
      label: 'Тема: {mode}',
      copy: 'Копировать',
      system: 'Системная',
      dark: 'Тёмная',
      light: 'Светлая',
      toggleAria: 'Сменить тему',
    },
    settings: {
      title: 'Настройки',
      copiedTitle: 'Скопировано',
      copiedBody: 'Сообщение скопировано в буфер обмена.',
      copyFailedTitle: 'Не удалось скопировать',
      copyFailedBody: 'Не удалось скопировать сообщение в буфер обмена.',
      youLabel: 'Вы:',
    },
    notifications: {
      settingsLabel: 'Уведомления:',
      settingsHint: 'Включите уведомления, чтобы получать оповещения о звонках/сообщениях, когда приложение в фоне.',
      promptTitle: 'Включить уведомления?',
      promptBody: 'Включите уведомления, чтобы получать оповещения о звонках и сообщениях на телефоне.',
      deniedBody: 'Уведомления заблокированы в настройках браузера для этого сайта.',
      enabledBody: 'Уведомления включены.',
      unsupportedBody: 'Уведомления не поддерживаются в этом браузере.',
      enable: 'Включить уведомления',
      notNow: 'Не сейчас',
      state: {
        default: 'Не включены',
        granted: 'Включены',
        denied: 'Заблокированы',
      },
    },
    sidebar: {
      groupChat: 'Публичный чат',
      noOneOnline: 'В сети только вы.',
    },
    chat: {
      typeMessage: 'Введите сообщение...',
      replying: 'Ответ',
      replyingTo: 'Ответ для {name}',
      replyTo: 'Ответ для {name}',
      joinOngoingTitle: 'Присоединиться к текущему звонку?',
      joinOngoingBodyNamed: 'Вы пытаетесь присоединиться к текущему звонку {name}.',
      joinOngoingBody: 'Вы пытаетесь присоединиться к текущему звонку.',
      callAria: 'Позвонить',
      sendAria: 'Отправить',
    },
    call: {
      notInCall: 'Не в звонке',
      inCall: 'В звонке: {names}',
      incomingFromLabel: 'Входящий звонок от',
      incomingFrom: 'Входящий звонок от {name}',
      unknown: 'Неизвестно',
      waitingToJoinNamed: 'Ожидание подключения к {name}…',
      waitingToJoin: 'Ожидание подключения…',
      requestingToJoinNamed: 'Запрос на подключение к {name}…',
      requestingToJoin: 'Запрос на подключение…',
      calling: 'Звоним…',
      callingNamed: 'Звоним {name}…',
      ringing: 'Гудки…',
      ringingNamed: 'Гудки у {name}…',
      inviting: 'Приглашаем…',
      connecting: 'Подключаемся…',
      connected: 'Подключено',
      incomingCall: 'Входящий звонок',
      incomingCallNamed: 'Входящий звонок: {name}',
      callEnded: 'Звонок завершён.',
      callRejected: 'Звонок отклонён.',
      callFailed: 'Звонок не удался: {reason}',
      joinFailed: 'Не удалось присоединиться.',
      joinFailedReason: 'Не удалось присоединиться: {reason}',
      from: 'От {name}',
      accept: 'Принять',
      reject: 'Отклонить',
      cancelRequest: 'Отменить запрос',
      addToCall: 'Добавить в звонок',
      hangUp: 'Положить трубку',
      joinRequestNamed: '{name} хочет присоединиться к этому звонку.',
      joinRequestSomeone: 'Кто-то хочет присоединиться к этому звонку.',
      micPermissionDenied: 'Доступ к микрофону запрещён.',
      micNotFound: 'Микрофон не найден.',
      micInUse: 'Микрофон уже используется.',
      micError: 'Ошибка микрофона.',
    },
    session: {
      enterName: 'Введите имя.',
      connecting: 'Подключение…',
      nameTaken: 'Имя уже занято.',
      invalidName: 'Некорректное имя.',
      disconnected: 'Отключено.',
      connectionError: 'Ошибка подключения.',
      turn: 'TURN {host}',
      udpRelayPortsRatio: 'UDP relay-порты ~{used}/{total}',
      udpRelayPortsTotal: 'UDP relay-порты {total}',
      udpRelayPortsUsed: 'UDP relay-порты в использовании ~{used}',
      estConfMax: 'оценка: макс. ~{users} пользователей',
      estCallsMax: 'оценка: макс. ~{calls} звонков 1:1',
    },
    confirm: {
      leave: 'Выйти и покинуть {appName}?',
      logoutAndRemoveKeyOtherDevices: 'Выйти на других устройствах и удалить там ключ? Это удалит локальный доступ на этих устройствах и это нельзя отменить.',
      deleteMessage: 'Удалить это сообщение?',
      deleteChat: 'Удалить этот чат для обоих пользователей?',
      leaveGroup: 'Выйти из этой группы?',
    },
    lang: {
      en: 'English',
      nl: 'Nederlands',
      fr: 'Français',
      de: 'Deutsch',
      ru: 'Русский',
    },
  },
} as const

type AnyRecord = any

function isPlainObject(v: unknown): v is AnyRecord {
  return Boolean(v) && typeof v === 'object' && !Array.isArray(v)
}

function mergeDeep(base: AnyRecord, override: AnyRecord): AnyRecord {
  const out: AnyRecord = { ...(base ?? {}) }
  for (const [k, v] of Object.entries(override ?? {})) {
    if (isPlainObject(v) && isPlainObject(base?.[k])) out[k] = mergeDeep(base[k], v)
    else out[k] = v
  }
  return out
}

// Ensure every locale has the full key spectrum.
// Any missing key falls back to English (without needing to duplicate text).
export const messages: Record<SupportedLocale, any> = {
  en: baseMessages.en,
  nl: mergeDeep(baseMessages.en, baseMessages.nl),
  fr: mergeDeep(baseMessages.en, baseMessages.fr),
  de: mergeDeep(baseMessages.en, baseMessages.de),
  ru: mergeDeep(baseMessages.en, baseMessages.ru),
}

export const i18n: any = createI18n({
  legacy: false,
  locale: detectInitialLocale(),
  fallbackLocale: 'en',
  warnHtmlMessage: false,
  messages,
} as any)

export function getLocale(): SupportedLocale {
  return normalizeLocale(String(i18n.global.locale.value)) ?? 'en'
}

export function setLocale(next: SupportedLocale) {
  i18n.global.locale.value = next
  localData.setString(LocalEntity.Locale, next)
}

export function cycleLocale(): SupportedLocale {
  const cur = getLocale()
  const idx = supportedLocales.indexOf(cur)
  const next = supportedLocales[((idx >= 0 ? idx : -1) + 1) % supportedLocales.length] ?? 'en'
  setLocale(next)
  return next
}
